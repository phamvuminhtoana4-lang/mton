<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Shop Acc ToÃ n</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:#020617;color:#fff}
header{background:#020617;padding:10px;display:flex;align-items:center;gap:10px}
#menuBtn{font-size:22px;cursor:pointer}
#userInfo{margin-left:auto;font-size:14px}
#side{position:fixed;left:-260px;top:0;width:250px;height:100%;background:#020617;padding:15px;transition:.3s;z-index:10}
#side a{display:block;padding:10px;border-bottom:1px solid #1e293b;cursor:pointer}
#overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:9}
.container{padding:15px}
.card{background:#020617;padding:15px;border-radius:12px;margin-bottom:15px;border:1px solid #1e293b}
input,select{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:none}
button{padding:8px;border:none;border-radius:6px;background:#fde047;font-weight:bold;cursor:pointer}
.view{display:none}
.view.active{display:block}
.small{font-size:13px;color:#cbd5f5}
hr{border:1px solid #1e293b}
</style>
</head>

<body>

<header>
<span id="menuBtn" onclick="openMenu()">â˜°</span>
<b>SHOP ACC TOÃ€N</b>
<div id="userInfo">ChÆ°a Ä‘Äƒng nháº­p</div>
</header>

<div id="side">
<a onclick="go('home')">ğŸ  Trang chÃ­nh</a>
<a onclick="go('nap')">ğŸ’³ Náº¡p tiá»n</a>
<a onclick="go('shop')">ğŸ›’ Shop acc</a>
<a onclick="go('hisNap')">ğŸ“œ Lá»‹ch sá»­ náº¡p</a>
<a onclick="go('hisBuy')">ğŸ® Lá»‹ch sá»­ mua acc</a>
<a id="adminLink" onclick="go('admin')" style="display:none">ğŸ‘‘ Quáº£n trá»‹</a>
<a onclick="logout()">ğŸšª ÄÄƒng xuáº¥t</a>
</div>
<div id="overlay" onclick="closeMenu()"></div>

<div class="container">

<!-- HOME -->
<div id="home" class="view active">
<div class="card">
<h2>ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i shop cá»§a ToÃ n</h2>
<p class="small">ÄÄƒng nháº­p Ä‘á»ƒ sá»­ dá»¥ng dá»‹ch vá»¥</p>
</div>

<div class="card">
<h3>ÄÄƒng kÃ½</h3>
<input id="ru" placeholder="TÃªn tÃ i khoáº£n">
<input id="rp" type="password" placeholder="Máº­t kháº©u">
<input id="rp2" type="password" placeholder="Nháº­p láº¡i máº­t kháº©u">
<button onclick="register()">ÄÄƒng kÃ½</button>
</div>

<div class="card">
<h3>ÄÄƒng nháº­p</h3>
<input id="lu" placeholder="TÃªn tÃ i khoáº£n">
<input id="lp" type="password" placeholder="Máº­t kháº©u">
<button onclick="login()">ÄÄƒng nháº­p</button>
</div>
</div>

<!-- NAP -->
<div id="nap" class="view">
<div class="card">
<h3>Náº¡p tháº» cÃ o</h3>
<select id="cardVal">
<option value="10000">10.000</option>
<option value="50000">50.000</option>
<option value="100000">100.000</option>
<option value="200000">200.000</option>
<option value="500000">500.000</option>
</select>
<input id="cardCode" placeholder="MÃ£ tháº»">
<input id="cardSeri" placeholder="Seri">
<button onclick="sendCard()">Gá»­i tháº»</button>
</div>

<div class="card">
<h3>Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng</h3>
<p>NgÃ¢n hÃ ng: <b>Viettel Money</b></p>
<p>STK: <b>9704229201718425041</b></p>
<p>Ná»™i dung CK (báº¯t buá»™c):</p>
<p><b id="ckNoiDung"></b></p>
<button onclick="sendCK()">TÃ´i Ä‘Ã£ chuyá»ƒn khoáº£n</button>
</div>
</div>

<!-- SHOP -->
<div id="shop" class="view">
<div id="accList"></div>
</div>

<!-- HISTORY -->
<div id="hisNap" class="view">
<div class="card">
<h3>Lá»‹ch sá»­ náº¡p</h3>
<div id="hn"></div>
</div>
</div>

<div id="hisBuy" class="view">
<div class="card">
<h3>Lá»‹ch sá»­ mua acc</h3>
<div id="hb"></div>
</div>
</div>

<!-- ADMIN -->
<div id="admin" class="view">
<div class="card">
<h3>Duyá»‡t náº¡p tiá»n</h3>
<div id="adminPending"></div>
</div>

<div class="card">
<h3>Up acc má»›i</h3>
<input id="aname" placeholder="TÃªn acc">
<input id="auser" placeholder="User acc">
<input id="apass" placeholder="Pass acc">
<input id="aprice" placeholder="GiÃ¡">
<button onclick="addAcc()">ThÃªm acc</button>
</div>
</div>

</div>

<script>
const ADMIN_USER="admin",ADMIN_PASS="Pvmt207#";
let users=JSON.parse(localStorage.users||"{}");
let accs=JSON.parse(localStorage.accs||"[]");
let pending=JSON.parse(localStorage.pending||"[]");
let cur=null,isAdmin=false;

function openMenu(){side.style.left="0";overlay.style.display="block"}
function closeMenu(){side.style.left="-260px";overlay.style.display="none"}

function go(id){
 if(id!=="home"&&!cur){alert("Vui lÃ²ng Ä‘Äƒng nháº­p");return}
 document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
 document.getElementById(id).classList.add('active');
 if(id==="shop")renderShop();
 if(id==="hisNap")renderNap();
 if(id==="hisBuy")renderBuy();
 if(id==="admin")renderAdmin();
 closeMenu();
}

function register(){
 if(rp.value!==rp2.value||!ru.value)return alert("Sai thÃ´ng tin");
 if(users[ru.value])return alert("ÄÃ£ tá»“n táº¡i");
 users[ru.value]={pass:rp.value,balance:0,nap:[],buy:[]};
 localStorage.users=JSON.stringify(users);
 alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng");
}

function login(){
 let u=lu.value,p=lp.value;
 if(u===ADMIN_USER&&p===ADMIN_PASS){
  cur="ADMIN";isAdmin=true;
  adminLink.style.display="block";
  userInfo.innerText="ğŸ‘‘ ADMIN";
  go("admin");return;
 }
 if(!users[u]||users[u].pass!==p)return alert("Sai thÃ´ng tin");
 cur=u;
 userInfo.innerText=`ğŸ‘¤ ${cur} | ğŸ’° ${users[cur].balance}Ä‘`;
 ckNoiDung.innerText="NAP_"+cur;
 go("nap");
}

function logout(){location.reload()}

function sendCard(){
 pending.push({type:"card",user:cur,val:cardVal.value,code:cardCode.value,seri:cardSeri.value});
 localStorage.pending=JSON.stringify(pending);
 alert("ÄÃ£ gá»­i tháº», chá» admin duyá»‡t");
}

function sendCK(){
 pending.push({type:"ck",user:cur,nd:"NAP_"+cur});
 localStorage.pending=JSON.stringify(pending);
 alert("ÄÃ£ gá»­i xÃ¡c nháº­n chuyá»ƒn khoáº£n");
}

function renderAdmin(){
 adminPending.innerHTML="";
 pending.forEach((p,i)=>{
  adminPending.innerHTML+=`
  <div class="card">
  <b>${p.user}</b><br>
  HÃ¬nh thá»©c: ${p.type}<br>
  <input id="m${i}" placeholder="Sá»‘ tiá»n cá»™ng">
  <button onclick="approve(${i})">Duyá»‡t</button>
  </div>`;
 });
}

function approve(i){
 let add=Number(document.getElementById("m"+i).value);
 users[pending[i].user].balance+=add;
 users[pending[i].user].nap.push("+"+add);
 pending.splice(i,1);
 localStorage.users=JSON.stringify(users);
 localStorage.pending=JSON.stringify(pending);
 renderAdmin();
}

function addAcc(){
 accs.push({name:aname.value,user:auser.value,pass:apass.value,price:Number(aprice.value)});
 localStorage.accs=JSON.stringify(accs);
 alert("ÄÃ£ thÃªm acc");
}

function renderShop(){
 accList.innerHTML="";
 accs.forEach((a,i)=>{
  accList.innerHTML+=`
  <div class="card">
  <b>${a.name}</b><br>${a.price}Ä‘
  <button onclick="buy(${i})">Mua</button>
  </div>`;
 });
}

function buy(i){
 let a=accs[i];
 if(users[cur].balance<a.price)return alert("KhÃ´ng Ä‘á»§ tiá»n");
 users[cur].balance-=a.price;
 users[cur].buy.push(`${a.name} | ${a.user} | ${a.pass}`);
 accs.splice(i,1);
 localStorage.users=JSON.stringify(users);
 localStorage.accs=JSON.stringify(accs);
 alert("Mua thÃ nh cÃ´ng");
}

function renderNap(){hn.innerHTML=users[cur].nap.map(n=>"<p>"+n+"</p>").join("")}
function renderBuy(){hb.innerHTML=users[cur].buy.map(b=>"<p>"+b+"</p>").join("")}
</script>

</body>
</html>
