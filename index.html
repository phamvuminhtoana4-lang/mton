<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>MTON Shop Acc - Top Náº¡p</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
 margin:0;font-family:Arial;
 background:radial-gradient(circle at top,#1e293b,#020617);
 color:#fff;overflow-x:hidden
}
nav{
 position:sticky;top:0;z-index:10;
 background:rgba(2,6,23,.9);
 display:flex;gap:8px;padding:10px
}
nav button{
 background:#1e293b;color:#fff;
 border:none;padding:8px 12px;
 border-radius:6px;cursor:pointer
}
nav button:hover{background:#334155}
section{display:none;padding:15px}
.active{display:block}
.card{
 background:rgba(2,6,23,.9);
 padding:12px;border-radius:12px;
 margin-bottom:12px
}
input,select{width:100%;padding:8px;border-radius:6px;border:none;margin:5px 0}
.btn{background:#fde047;color:#000;font-weight:bold;border:none;padding:8px;border-radius:6px}
.rank1{color:#facc15;font-weight:bold}
.rank2{color:#e5e7eb;font-weight:bold}
.rank3{color:#fb7185;font-weight:bold}

/* Hoa Ä‘Ã o */
.flower{
 position:fixed;top:-10px;width:16px;height:16px;
 background:pink;border-radius:50%;
 box-shadow:-8px 0 pink,8px 0 pink,0 -8px pink,0 8px pink;
 animation:fall linear infinite;opacity:.7
}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg)}}
</style>
</head>
<body>

<nav>
<button onclick="show('home')">ğŸ  Trang chÃ­nh</button>
<button onclick="show('shop')">ğŸ›’ Shop</button>
<button onclick="show('top')">ğŸ”¥ Top náº¡p</button>
<button onclick="show('history')">ğŸ“œ Lá»‹ch sá»­</button>
<button onclick="show('admin')">ğŸ” Admin</button>
</nav>

<!-- HOME -->
<section id="home" class="active">
<div class="card">
<h3>ÄÄƒng nháº­p</h3>
<input id="user" placeholder="TÃªn Ä‘Äƒng nháº­p">
<button class="btn" onclick="login()">VÃ o shop</button>
<p id="hello"></p>
<p>Sá»‘ dÆ°: <b id="bal">0</b>Ä‘</p>
</div>

<div class="card">
<h3>Náº¡p tháº»</h3>
<select id="cardVal">
<option value="10000">10.000</option>
<option value="50000">50.000</option>
<option value="100000">100.000</option>
<option value="200000">200.000</option>
<option value="500000">500.000</option>
</select>
<input id="cardCode" placeholder="MÃ£ tháº»">
<input id="cardSeri" placeholder="Seri">
<button class="btn" onclick="sendCard()">Gá»­i tháº»</button>
<p style="font-size:13px;color:#cbd5f5">Chá» admin duyá»‡t</p>
</div>
</section>

<!-- SHOP -->
<section id="shop">
<div class="card">
<h3>Shop Acc</h3>
<div id="accList"></div>
</div>
</section>

<!-- TOP -->
<section id="top">
<div class="card">
<h3>ğŸ”¥ TOP Náº P THÃNG</h3>
<div id="topList"></div>
</div>
</section>

<!-- HISTORY -->
<section id="history">
<div class="card">
<h3>Lá»‹ch sá»­ náº¡p</h3>
<div id="hisCard"></div>
</div>
</section>

<!-- ADMIN -->
<section id="admin">
<div class="card">
<h3>Admin</h3>
<input type="password" id="adminPass" placeholder="Máº­t kháº©u admin">
<button class="btn" onclick="adminLogin()">ÄÄƒng nháº­p</button>
</div>
<div id="adminPanel" style="display:none">
<div class="card">
<h4>Duyá»‡t tháº»</h4>
<div id="adminCards"></div>
</div>
</div>
</section>

<script>
const ADMIN_PASS="Pvmt207#";
let u="";
let bal=JSON.parse(localStorage.bal||"{}");
let cards=JSON.parse(localStorage.cards||"[]");
let topNap=JSON.parse(localStorage.topNap||"{}");

function show(id){
 document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 if(id==="top")renderTop();
}

function login(){
 u=user.value;
 bal[u]=bal[u]||0;
 localStorage.bal=JSON.stringify(bal);
 hello.innerText="Xin chÃ o "+u;
 balUI();
}

function balUI(){bal.innerText=bal[u]||0}

function sendCard(){
 cards.push({u,val:+cardVal.value,code:cardCode.value,seri:cardSeri.value,ok:false});
 localStorage.cards=JSON.stringify(cards);
 alert("ÄÃ£ gá»­i tháº»");
}

function adminLogin(){
 if(adminPass.value===ADMIN_PASS){
  adminPanel.style.display="block";
  renderAdmin();
 }
}

function renderAdmin(){
 adminCards.innerHTML="";
 cards.forEach((c,i)=>{
  if(!c.ok){
   adminCards.innerHTML+=`
   <div class="card">
    ${c.u} - ${c.val}Ä‘
    <button class="btn" onclick="approve(${i})">Duyá»‡t</button>
   </div>`;
  }
 });
}

function approve(i){
 cards[i].ok=true;
 bal[cards[i].u]=(bal[cards[i].u]||0)+cards[i].val;

 topNap[cards[i].u]=(topNap[cards[i].u]||0)+cards[i].val;

 localStorage.bal=JSON.stringify(bal);
 localStorage.cards=JSON.stringify(cards);
 localStorage.topNap=JSON.stringify(topNap);
 renderAdmin();
}

function renderTop(){
 let arr=Object.entries(topNap).sort((a,b)=>b[1]-a[1]).slice(0,10);
 topList.innerHTML="";
 arr.forEach((e,i)=>{
  let cls=i==0?"rank1":i==1?"rank2":i==2?"rank3":"";
  let icon=i==0?"ğŸ¥‡":i==1?"ğŸ¥ˆ":i==2?"ğŸ¥‰":"#"+(i+1);
  topList.innerHTML+=`
   <div class="card ${cls}">
    ${icon} ${e[0]} - ${e[1].toLocaleString()}Ä‘
   </div>`;
 });
}

/* Hoa Ä‘Ã o */
for(let i=0;i<20;i++){
 let f=document.createElement("div");
 f.className="flower";
 f.style.left=Math.random()*100+"vw";
 f.style.animationDuration=8+Math.random()*6+"s";
 document.body.appendChild(f);
}
</script>
</body>
</html>
